# AetherWeaver ğŸ§¶

**ä¸º Serverless Edge è€Œç”Ÿçš„æ™ºèƒ½ AI ç½‘å…³ä¸ç¼–æ’å™¨ (An Intelligent AI Gateway & Orchestrator for the Serverless Edge)**

---

AetherWeaver ä¸ä»…ä»…æ˜¯åˆä¸€ä¸ª LangChain éƒ¨ç½²æ¨¡æ¿ã€‚

å®ƒå¦‚å…¶åï¼šåœ¨ **Aether (ä»¥å¤ª)** èˆ¬è½»ç›ˆçš„ **Serverless Edge** ç¯å¢ƒä¸­ï¼ŒåŒ–èº«ä¸ºä¸€ä¸ªç²¾å¯†çš„ **Weaver (ç¼–ç»‡è€…)**ï¼Œé€šè¿‡å…¶å†…ç½®çš„**æ™ºèƒ½è·¯ç”±æ ¸å¿ƒ**ï¼Œå°†ç”¨æˆ·çš„å¤æ‚è¯·æ±‚ç¼–ç»‡ã€åˆ†å‘ç»™æœ€åˆé€‚çš„ AI åŠŸèƒ½é“¾ï¼ˆChainsï¼‰ã€‚

æœ¬é¡¹ç›®çš„æ ¸å¿ƒæ˜¯ä¸ºä½ æä¾›ä¸€ä¸ªé›†ä¸‰å¤§ä¼˜åŠ¿äºä¸€ä½“çš„è§£å†³æ–¹æ¡ˆï¼š
- **æ™ºèƒ½è·¯ç”± (Intelligent Routing)**: å†…ç½®å¸¦æƒé‡çš„è‡ªå®šä¹‰è·¯ç”±æ¨¡å‹ï¼Œèƒ½ç†è§£ç”¨æˆ·æ„å›¾ï¼Œå¹¶å°†ä»»åŠ¡åˆ†å‘ç»™æœ€é«˜æ•ˆçš„â€œä¸“å®¶â€æ¨¡å‹æˆ–å·¥å…·é“¾ã€‚
- **Serverless è½»é‡åŒ– (Serverless Native)**: å®Œå…¨åŸºäº Vercel Edge Functions æ„å»ºï¼Œå®ç°å…¨çƒæ¯«ç§’çº§å“åº”ã€é›¶è¿ç»´æˆæœ¬å’Œæè‡´çš„å¼¹æ€§ä¼¸ç¼©ã€‚
- **LangChain é“¾å¼é€šç”¨æ€§ (LangChain Native)**: æ ¹æ¤äº LangChain.js ç”Ÿæ€ï¼Œä½ å¯ä»¥æ— ç¼å¤ç”¨ã€æ‰©å±•å’Œç»„åˆä»»ä½•ç°æœ‰çš„ Chainsã€Agents å’Œ Toolsã€‚

---

## æ ¸å¿ƒç‰¹æ€§

- **è·¯ç”±æ ¸å¿ƒ**: åŒºåˆ«äºç®€å•çš„æ¡ä»¶åˆ¤æ–­ï¼ŒAetherWeaver å¼•å…¥äº†æ›´å¤æ‚çš„ã€å¯é…ç½®æƒé‡çš„è·¯ç”±å†³ç­–æ¨¡å‹ï¼Œå®ç°æ›´ç²¾å‡†çš„ä»»åŠ¡åˆ†å‘ã€‚
- **æ— æœåŠ¡å™¨åŸç”Ÿæ¶æ„**: éƒ¨ç½²åœ¨ Vercel Edgeï¼Œæ— å†·å¯åŠ¨çƒ¦æ¼ï¼Œèƒ½ä»¥æä½æˆæœ¬æ‰¿è½½é«˜å¹¶å‘æµé‡ã€‚ä½ çš„ä»£ç åªåœ¨è¢«è¯·æ±‚æ—¶è¿è¡Œã€‚
- **LangChain ç”Ÿæ€å…¼å®¹**: ä½ å¯ä»¥åƒæ­ä¹é«˜ä¸€æ ·ï¼ŒæŠŠä½ å·²æœ‰çš„ LangChain.js æ¨¡å—ï¼ˆChains, Agents, Toolsï¼‰è½»æ¾é›†æˆåˆ° AetherWeaver çš„è·¯ç”±ä½“ç³»ä¸­ã€‚
- **LCEL ä¼˜å…ˆ (LCEL First)**: å…¨é¢å…¼å®¹å¹¶æ‹¥æŠ± LangChain è¡¨è¾¾å¼è¯­è¨€ï¼ˆLCELï¼‰ï¼Œä½ å¯ä»¥ç”¨æ›´ç°ä»£åŒ–ã€æ›´å£°æ˜å¼çš„æ–¹å¼æ„å»ºå’Œç»„åˆä½ çš„ AI åŠŸèƒ½é“¾ã€‚
- **ç«¯åˆ°ç«¯æµå¼å“åº”**: ä»è·¯ç”±å†³ç­–åˆ°æœ€ç»ˆç­”æ¡ˆï¼Œæ•´ä¸ªå¤„ç†è¿‡ç¨‹å®Œå…¨æµå¼åŒ–ï¼Œä¸ºç”¨æˆ·æä¾›æœ€ä½³äº¤äº’ä½“éªŒã€‚
- **æç®€æ‰©å±•æ¥å£**: æ·»åŠ ä¸€ä¸ªæ–°çš„â€œä¸“å®¶â€èƒ½åŠ›ï¼ˆChainï¼‰ï¼Œä»…éœ€å‡ è¡Œä»£ç å³å¯æ³¨å†Œåˆ°è·¯ç”±ç½‘å…³ä¸­ã€‚
- **Serverless ä¸­æ–‡ä¼˜åŒ–**: å°† Jieba ä¸­æ–‡åˆ†è¯åº“å‰¥ç¦»å¹¶æ”¹é€ ä¸ºé™æ€èµ„æºï¼Œå®Œç¾è§£å†³äº†åœ¨ Vercel Edge ç­‰æ— æœåŠ¡ç«¯ç¯å¢ƒä¸‹è¿›è¡Œé«˜æ•ˆä¸­æ–‡åˆ†è¯çš„éš¾é¢˜ã€‚

---

# ğŸ—ºï¸ æŠ€æœ¯æ¶æ„å›¾

AetherWeaver çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ª**å¤šä¸“å®¶è·¯ç”±ç³»ç»Ÿ (Multi-Expert Routing System)**ã€‚å®ƒä¼šæ ¹æ®ç”¨æˆ·æ„å›¾ï¼Œå°†è¯·æ±‚åˆ†å‘ç»™å››å¤§ä¸“å®¶æ± ä¸­å¤šä¸“å®¶çš„ä¸€ä¸ªï¼Œå¹¶ç”±æ± ä¸­æœ€åˆé€‚çš„ä¸“å®¶è¿›è¡Œå¤„ç†ã€‚

```mermaid
graph LR
    %% --- 1. ç”¨æˆ·è¾“å…¥ ---
    A["ç”¨æˆ·è¯·æ±‚ (User Request)"]

    %% --- 2. æ ¸å¿ƒè·¯ç”±å†³ç­– ---
    subgraph "AetherWeaver Gateway (Vercel Edge)"
        B["**æ™ºèƒ½è·¯ç”±æ¨¡å‹ (Router)**"]
        C{"æ„å›¾åˆ†æ & å†³ç­–"}
    end

    %% --- 3. å››å¤§ä¸“å®¶æ±  (Four Expert Pools) ---
    subgraph "ä¸“å®¶æ± : æ™®é€šå¯¹è¯ (Basic Conversation)"
        direction LR
        S1["ä¸“å®¶ S1"]
    end

    subgraph "ä¸“å®¶æ± : å¤æ‚å¯¹è¯ (Enhanced Conversation)"
        direction LR
        E1["ä¸“å®¶ E1"]
    end

    subgraph "ä¸“å®¶æ± : RAG çŸ¥è¯†æ£€ç´¢"
        direction LR
        R1["ä¸“å®¶ R1"]
    end

    subgraph "ä¸“å®¶æ± : Agent å·¥å…·è°ƒç”¨"
        direction LR
        A1["ä¸“å®¶ A1"]
    end

    %% --- 4. å¤–éƒ¨æœåŠ¡ä¸èƒ½åŠ› ---
    subgraph "èƒ½åŠ›å±‚ (Capabilities & Services)"
        LLM["å¤§è¯­è¨€æ¨¡å‹ (LLM with Memory)"]
        RAG_DB["å‘é‡æ•°æ®åº“ / æœç´¢å¼•æ“"]
        TOOLS["é€šç”¨å·¥å…·é›† (Any LangChain Tool)"]
    end

    %% --- 5. è·¯ç”±ä¸æ‰§è¡Œè·¯å¾„è¿æ¥ ---
    A --> B
    B --> C
    C -- "åˆ¤å®šä¸º: æ™®é€šå¯¹è¯" --> S1
    C -- "åˆ¤å®šä¸º: å¤æ‚å¯¹è¯" --> E1
    C -- "åˆ¤å®šä¸º: RAG" --> R1
    C -- "åˆ¤å®šä¸º: Agent" --> A1

    S1 --> LLM
    E1  --> LLM
    R1  --> RAG_DB --> LLM
    A1  --> TOOLS --> LLM


    %% --- 6. ç»Ÿä¸€æµå¼å“åº” ---
    LLM --> Z["æµå¼å“åº” (Streaming Response)"]
    Z --> A
```
---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/inoribea/AetherWeaver.git
cd AetherWeaver
```

### 2. å®‰è£…ä¾èµ–
```bash
pnpm install
```

### 3. é…ç½®ç¯å¢ƒå˜é‡
å¤åˆ¶ `.env.example` ä¸º `.env.local` å¹¶å¡«å…¥ä½ çš„ API å¯†é’¥:
```env
OPENAI_API_KEY=sk-...
TAVILY_API_KEY=tvly-...
# å…¶ä»–ä½ éœ€è¦çš„ Keys
```

### 4. æœ¬åœ°è¿è¡Œ
```bash
pnpm dev
```

### 5. ä¸€é”®éƒ¨ç½²åˆ° Vercel
[
![Deploy to Vercel](https://vercel.com/button)
](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Finoribea%2FAetherWeaver&project-name=aetherweaver&repository-name=aetherweaver)

#### å‚è€ƒæ–‡æ¡£

- [Vercel éƒ¨ç½²æŒ‡å—](docs/vercel_deployment_guide.md)
- [ç¯å¢ƒå˜é‡ç¤ºä¾‹](.env.example)
- [ç»Ÿä¸€è·¯ç”±å™¨å®ç°](utils/unified-router.ts)
- [Chat è·¯ç”±å®ç°](/api/chat/route.ts)
- [v1 è·¯ç”±å®ç°](app/api/v1/chat/completions/route.ts)

---

## ğŸ”§ å¦‚ä½•æ‰©å±•ä½ çš„â€œç¼–ç»‡â€èƒ½åŠ›ï¼Ÿ

ä¸º AetherWeaver æ·»åŠ ä¸€ä¸ªæ–°çš„â€œä¸“å®¶ Chainâ€ éå¸¸ç®€å•ï¼š

1.  **åˆ›å»ºä¸“å®¶**: åœ¨ `app/lib/experts/` ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„ `Chain` æˆ– `Agent`ã€‚
2.  **æ³¨å†Œä¸“å®¶**: åœ¨è·¯ç”±é…ç½®æ–‡ä»¶ä¸­ï¼ˆä¾‹å¦‚ `app/api/chat/router.ts`ï¼‰ï¼Œå¯¼å…¥ä½ çš„æ–°ä¸“å®¶ï¼Œå¹¶ä¸ºå…¶å®šä¹‰ä¸€ä¸ªå”¯ä¸€çš„ `name` å’Œä¸€æ®µæ¸…æ™°çš„ `description`ã€‚
3.  **å®Œæˆ**: AetherWeaver çš„æ™ºèƒ½è·¯ç”±æ¨¡å‹ç°åœ¨ä¼šè‡ªåŠ¨å°†ç¬¦åˆæè¿°çš„ç”¨æˆ·è¯·æ±‚â€œç¼–ç»‡â€åˆ°ä½ çš„æ–°ä¸“å®¶ä¸Šã€‚

---

## ğŸ“œ License
MIT License
